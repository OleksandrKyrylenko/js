<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <title>Task 1</title>
</head>
<body>
    <header></header>
    <main class="page">
        <div class="page__container task">
            <h2>Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями<br>
                1.назва компанії на час розробки (назву періодично змінюють)<br>
                2.власник компанії<br>
                3.спонсори (масив спонсорів)<br>
                    3.0* прізвище спонсора<br>
                    3.1* ім’я  спонсора<br>
                    3.2* сума вкладень спонсора<br>
                4.рік випуску<br>
                5.вартість сайту<br>
                </h2>
            <script>
                let siteList = [
                    {
                        title:'Company 1',
                        companyOwner:'Owner 1',
                        sponsors: [
                            {
                                surname: 'Scott',
                                name: 'James ',
                                investmentAmount: 10000
                            },
                            {
                                surname: 'Mikel',
                                name: 'Arteta ',
                                investmentAmount: 75000
                            },
                            {
                                surname: 'Mats',
                                name: 'Hummels ',
                                investmentAmount: 20000
                            }
                        ],
                        yearGraduation: 2017,
                        cost: 20000
                    },
                    {
                        title:'Company 1',
                        companyOwner:'Owner 1',
                        sponsors: [
                            {
                                surname: 'Bastian',
                                name: 'Schwansteiger ',
                                investmentAmount: 15000
                            },
                            {
                                surname: 'Marcus',
                                name: 'Rashford ',
                                investmentAmount: 5000
                            },
                            {
                                surname: 'Mats',
                                name: 'Hummels ',
                                investmentAmount: 10000
                            }
                        ],
                        yearGraduation: 2018,
                        cost: 5000
                    },
                    {
                        title:'Company 2',
                        companyOwner:'Owner 2',
                        sponsors: [
                            {
                                surname: 'Bastian',
                                name: 'Schwansteiger ',
                                investmentAmount: 15000
                            },
                            {
                                surname: 'Marcus',
                                name: 'Rashford ',
                                investmentAmount: 5000
                            },
                            {
                                surname: 'Mats',
                                name: 'Hummels ',
                                investmentAmount: 10000
                            }
                        ],
                        yearGraduation: 2022,
                        cost: 9000
                    },
                    {
                        title:'Company 3',
                        companyOwner:'Owner 3',
                        sponsors: [
                            {
                                surname: 'Scott',
                                name: 'James ',
                                investmentAmount: 10000
                            },
                            {
                                surname: 'Mikel',
                                name: 'Arteta ',
                                investmentAmount: 25000
                            },
                            {
                                surname: 'Mats',
                                name: 'Hummels ',
                                investmentAmount: 10000
                            }
                        ],
                        yearGraduation: 2008,
                        cost: 10500
                    },
                    {
                        title:'Company 1',
                        companyOwner:'Owner 1',
                        sponsors: [
                            {
                                surname: 'Scott',
                                name: 'James ',
                                investmentAmount: 80000
                            },
                            {
                                surname: 'Mikel',
                                name: 'Arteta ',
                                investmentAmount: 25000
                            },
                            {
                                surname: 'Mats',
                                name: 'Hummels ',
                                investmentAmount: 10000
                            }
                        ],
                        yearGraduation: 2007,
                        cost: 15000
                    }
                ]
                // Знайти:
                // 1) загальну вартість усіх сайтів
                const totalCostAllSites = siteList.reduce((prevCost, site)=> prevCost + site.cost ,0)
                console.log(totalCostAllSites)
                //============================================================== 
                // 2) кількість сайтів, що було зроблено між 2000 та 2009 рр.
                const quatitySiteDuringPeriod_2000_2009 = siteList.reduce((prevValue, site)=> {
                    if(site.yearGraduation >= 2000 && site.yearGraduation <= 2009) return prevValue+1
                    else return prevValue
                },0)
                console.log(quatitySiteDuringPeriod_2000_2009)
                //============================================================== 
                // 3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000
                const maxSumAttachments = 100000
                const totalSumAttachments = siteList.map((site) => ({
                    title: site.title,
                    totalPrice: site.sponsors.reduce((prevSum, sponsor) => prevSum + sponsor.investmentAmount,0),
                }))
                console.log(totalSumAttachments)
                let count = 0
                for (const attachment of totalSumAttachments) {
                    attachment.totalPrice > maxSumAttachments ? count++ : count
                }
                console.log(count)
                // const totalSumAttachments = siteList.filter(site =>{
                //     const valueSum = site.sponsors.reduce((prevSum, sponsor)=> prevSum + sponsor.investmentAmount, 0) 
                //     return valueSum > maxSumAttachments }).length
                // console.log(totalSumAttachments)
                //============================================================== 
                // 4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)
                // let newArr = []
                // siteList.forEach(site => {
                //     site.sponsors.forEach(sponsor => {
                //         newArr.push(sponsor)
                //     })
                // })
                // console.log(newArr)

                let newArr = siteList.reduce((prevValue,site) => {
                    for (const sponsor of site.sponsors) {
                        prevValue.push(sponsor)
                    }
                    return prevValue
                },[])
                console.log(newArr)

                // let newArr = []
                // siteList.map(site => site.sponsors.map(sponsor => newArr.push(sponsor)))
                // console.log(newArr)
                //============================================================== 
                // 5) знайти рік, коли прибуток був найбільшим
                let maxProfit = siteList[0].cost
                let yearOfHighestProfit = siteList[0].yearGraduation
                for(let i = 1; i < siteList.length; i++){
                    if(siteList[i].cost > maxProfit){
                        maxProfit = siteList[i].cost
                        yearOfHighestProfit = siteList[i].yearGraduation
                    }
                }
                console.log(yearOfHighestProfit)
                //============================================================== 
                // 6) упорядкувати список за спаданням прибутку
                // let result = JSON.parse(JSON.stringify(siteList)).sort((site1, site2) => site2.cost - site1.cost)
                // console.log(result)

                function sortSite(siteList){
                    let prevIndex = siteList.length-1
                    for(let i = 0; i<prevIndex; i++){
                        let currentMinIndex = i
                        for(let j = i+1; j < siteList.length; j++){
                            if(siteList[j].cost > siteList[currentMinIndex].cost) {
                                currentMinIndex = j
                            }
                        }
                        if(i !== currentMinIndex){
                            let tmp = siteList[i].cost
                            siteList[i].cost = siteList[currentMinIndex].cost
                            siteList[currentMinIndex].cost = tmp
                        }
                    }
                    return siteList
                }
                console.log(sortSite(siteList))

                //============================================================== 
                // 7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000
                const listSitePriceTo10000 = siteList.filter(site => site.cost < 10000)
                console.log(listSitePriceTo10000)
                const listSitePriceMore10000 = siteList.filter(site => site.cost > 10000)
                console.log(listSitePriceMore10000)






















                //Задача. Для рядка тексту вивести на екран кількість входжень кожної літери (побудувати об’єкт, у якому поля –
                // літери, а значення – кількість входжень).Наприклад, для слова «HELLO»

                // let letter = 'HELLO'
                
                // const object = {}
                
                // for (const word of letter) {
                //     if(word in object) object[word]++
                //     else object[word] = 1
                // }
                // for (const key in object) {
                //     console.log(`${key} : ${object[key]}`)
                // }



                // let arr = ['2','10', '400', '100']
                // let newArr = arr.map(parseInt)
                // console.log(newArr);

                // let arr = ['2','10', '400', '100']
                // let newArr = []
                // for (const item of arr) {
                //     newElement = parseInt(item)
                //     newArr.push(newElement)
                // }
                // console.log(newArr);

            </script>
        </div>
    </main>
    <footer></footer>
    <script src="./js/script.js"></script>
</body>
<style>
    @charset "UTF-8";
	@import url("https://fonts.googleapis.com/css?family=Montserrat:regular,700&display=swap");
    h2{
        font-size: 18px;
        color:#020202;
        text-align: left;
        margin-bottom: 25px;
    }
    .task{
        color:rgb(255, 255, 255);
    }
    .task:not(:last-child){
        margin-bottom: 25px;
    }
    .tablet{
        display: grid;
        grid-template-columns: repeat(3, auto);
        justify-content: center;
    }
    .tablet__item{
        display: flex;
        flex-direction: column;
        align-items: center;
        border:1px solid #020202;
        gap:25px;
        /* padding: 15px; */
        padding-top: 0;
        padding-bottom: 0;
        position: relative;
    }
    .tablet__item::before{
        content:'';
        position: absolute;
        width: 100%;
        height: 1px;
        background-color: #020202;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
    }
    .tablet__title{
        padding: 10px;
        /* padding-top: 5px; */
        text-align: center;
    }
    .tablet__value{
        display: flex;
        padding: 10px;
        padding-top: 0;
        align-items: center;
        justify-content: center;
        text-align: center;
    }
</style>
</html>